asrm.dev {
    log {
        output stdout
        format console
        level DEBUG
    }

    # --- API Laravel: /clinicamv/api -> PHP-FPM (Caddy quita /clinicamv)
    handle_path /clinicamv/api* {
        # (Opcional) para trazar por headers:
        # header {
        #   set X-Caddy-Block api
        #   set X-Debug-URI {uri}
        # }

        root * /var/www/public
        php_fastcgi clinicamv-php:9000   # incluye fallback a index.php con la URI
    }

    # --- Frontend Angular: resto bajo /clinicamv
    handle_path /clinicamv* {
        # header { set X-Caddy-Block frontend set X-Debug-URI {uri} }
        reverse_proxy clinicamv-frontend:80
    }

    # Estático /presentacion
    handle_path /presentacion* {
        root * /srv/presentacion
        file_server
    }

    # Raíz
    root * /srv/web-personal
    file_server
}
